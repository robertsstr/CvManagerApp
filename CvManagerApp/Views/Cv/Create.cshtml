@using Microsoft.AspNetCore.Mvc.TagHelpers
@model CvManagerApp.Dtos.CvInputModel

<form id="cvForm" method="post" asp-action="create">
    <label asp-for="FirstName">vārds:</label>
    <input asp-for="FirstName" class="form-control" required>
    <span asp-validation-for="FirstName" class="text-danger"></span>
    <br>
    <label asp-for="LastName">uzvārds:</label>
    <input asp-for="LastName" class="form-control" required>
    <span asp-validation-for="LastName" class="text-danger"></span>
    <br>
    <label asp-for="PhoneNumber">tel. numurs:</label>
    <input asp-for="PhoneNumber" class="form-control" required>
    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
    <br>
    <label asp-for="Email">epasts:</label>
    <input asp-for="Email" class="form-control">
    <span asp-validation-for="Email" class="text-danger" type="email"></span>
    <br>
    <label asp-for="DateOfBirth">dzimšanas datums:</label>
    <input asp-for="DateOfBirth" class="form-control" type="date">
    <br>

    <div id="educationFields">
        <h5>Izglītība</h5>
    </div>
    <button type="button" class="btn btn-primary" onclick="addEducation()">pievienot izglītību</button>
    <br>

    <div id="workExperienceFields">
        <h5>Darba pieredze</h5>
    </div>
    <button type="button" class="btn btn-primary" onclick="addWorkExperience()">pievienot darba pieredzi</button>
    <br>

    <div id="skillAchievementFields">
        <h5>Prasmes/Sasniegumi</h5>
    </div>
    <button type="button" class="btn btn-primary" onclick="addSkillAchievement()">pievienot prasmi/sasniegumu</button>
    <br>

    <button type="submit" class="btn btn-primary">saglabāt</button>
</form>

<script>
    async function deleteEducation(button, educationId) {
        var educationDiv = button.closest(".education");
        educationDiv.remove();
    }

    function addEducation() {
        var educationCount = 0;
        var educationFields = document.getElementById("educationFields");
        var newEducationField = document.createElement("div");
        newEducationField.classList.add("education");

        newEducationField.innerHTML = `
            <div class="form-group">
                <label>mācību iestāde:</label>
                <input type="text" name="Educations[${educationCount}].EducationalEstablishment" class="form-control" required>
            </div>
            <div class="form-group">
                <label>fakultāte:</label>
                <input type="text" name="Educations[${educationCount}].Faculty" class="form-control">
            </div>
            <div class="form-group">
                <label>studiju programma:</label>
                <input type="text" name="Educations[${educationCount}].StudyProgram" class="form-control">
            </div>
            <div class="form-group">
                <label>mācību status:</label>
                <input type="text" name="Educations[${educationCount}].StudyStatus" class="form-control" required>
            </div>
            <input type="hidden" name="Educations[${educationCount}].Id" value="">
            <button type="button" class="btn btn-danger" onclick="deleteEducation(this)">dzēst</button>
        `;

        educationFields.appendChild(newEducationField);
        educationCount++;
    }

    function deleteWorkExperience(button) {
        var workExperienceDiv = button.closest(".work-experience");
        workExperienceDiv.remove();
    }

    function addWorkExperience() {
        var workExperienceCount = 0;
        var workExperienceFields = document.getElementById("workExperienceFields");
        var newWorkExperienceField = document.createElement("div");
        newWorkExperienceField.classList.add("work-experience");

        newWorkExperienceField.innerHTML = `
            <div class="form-group">
                <label>uzņēmums:</label>
                <input type="text" name="WorkExperiences[${workExperienceCount}].Company" class="form-control" required>
            </div>
            <div class="form-group">
                <label>amats:</label>
                <input type="text" name="WorkExperiences[${workExperienceCount}].Position" class="form-control">
            </div>
            <div class="form-group">
                <label>sākuma datums:</label>
                <input type="date" name="WorkExperiences[${workExperienceCount}].StartDate" class="form-control">
            </div>
            <div class="form-group">
                <label>beigu datums:</label>
                <input type="date" name="WorkExperiences[${workExperienceCount}].EndDate" class="form-control">
            </div>
            <button type="button" class="btn btn-danger" onclick="deleteWorkExperience(this)">dzēst</button>
        `;

        workExperienceFields.appendChild(newWorkExperienceField);
        workExperienceCount++;
    }

    function addSkillAchievement() {
        var skillAchievementCount = 0;
        var skillAchievementFields = document.getElementById("skillAchievementFields");
        var newSkillAchievementField = document.createElement("div");
        newSkillAchievementField.classList.add("skill-achievement");

        newSkillAchievementField.innerHTML =
            `<div class="form-group">
                <label>prasme vai sasniegums:</label>
                <input type="text" name="SkillsAchievements[${skillAchievementCount}].SkillOrAchievement" class="form-control" required>
            </div>
            <button type="button" class="btn btn-danger" onclick="deleteSkillAchievement(this)">dzēst</button>`;

        skillAchievementFields.appendChild(newSkillAchievementField);
        skillAchievementCount++;
    }

    function deleteSkillAchievement(button) {
        var skillAchievementDiv = button.closest(".skill-achievement");
        skillAchievementDiv.remove();
    }
</script>